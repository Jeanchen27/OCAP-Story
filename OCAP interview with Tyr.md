# 开放链访问协议（OCAP）采访（with Tyr）

1. 6月发布的是OCAPBeta版，离正式开源的RC1版还有多远，需要做哪些工作？

beta版OCAP包含比特币、以太坊的底层API，通过GraphQL做成统一的接口，跑一次、到处使用，类似reactive思想，目前只提供只读接口，下一个版本加入交易开放写的接口，大量数据分析形成的独特的API，让大家更好获取现有链上数据
——比特币9年、以太坊3年，分析比特币数据过程中国，获得很有意思的结果，UTXO历史数据，总量增减，到17、18年到了高峰。通过一个API，能看到什么交易产生、资金流入流出、账号地址，账户信息本身，整理组织脉络，可以提供给应用方便使用。
打造DEMO的应用，感受OCAP的能力
离正式开源的至少还有一个月到一个半月的时间，OCAP只在适配器层面开源，因为它不是客户端软件，而是线上服务，即使开源，没有数据数据，开源本身意义不大，链适配器开源供开发者接入其他公链参考。

2. 第一版OCAP只能让开发者读取链上数据、不能修改写入，会不会单调？

我们做的是基础工作，比特币、以太坊自带的API只能在本机使用，不是互联网领域，我们在基础设施方面花了很多精力，第一版还不能支持交易写入，但很快会加上，同时会加上账号实时追踪、可以调用的API。让OCAP能做的事情更丰富。

3. 第一版OCAP，开发者能参与到什么程度？期望有什么反馈和回报？

OCAP上线后，开发者可以参与构建DApps，我们会发布Demo启发大家，我们也会举办黑客松活动，鼓励大家开发有趣的应用，也倾听社区的反应，收集使用API暴露出的问题，下一版加以改进。
参与黑客松和社区开发活动，可获得ABT奖励。

4. OCAP技术上与其他跨链解决方案的异同（优胜之处）？

OCAP本身不算是跨链技术，通过公共抽象层将不同的跨链能力统一起来，方便大家更好访问链上数据，并在链上写入数据；之前要在比特币、以太坊、超级账本上开发应用，不同链的API、RPC，需要单独学习，不同链很多细节不同，OCAP只需学习一套底层API，而是从应用需求出发去跨链，我们不强调跨链，而是去整合。

5. OCAP实现为何采用GraphQL？

GraphQL，从应用开发的角度来讲，会减轻客户端开发者对数据访问的压力。用RESTFUL API，客户端要访问很深的数据，对区块的交易要做请求，对比特币的UTXO要做请求，user story，有很多数据你访问并不需要，你只是需要交易哈希值。像使用SQL一样，使用GraphQL查询，行为交给服务器端，从不同数据源获取数据，构造一个查询反馈，GraphQL从解决方案，round trip，能够使网络传输数据最优化。客户端需要什么数据，服务器就返回什么数据

6. 排除了REST API，技术选型有其他考虑么（如谷歌的GRPC）?

技术选型时考虑过这三者：REST API，多重调用，首先排除；GRPC，更适合服务器端，服务器对服务器，使用HTTP2，Protobuff（？），整个在网络中数据传输非常精简，不适合对外的API，开发者有学习曲线，各种工具来生成code schema。对原有客户端，http2方面没有很好的支持，对客户端开发有很多坑，更适合后端，不适合客户端对服务器端的数据查询调用。

7. GraphQL在实现开发链访问层（三层API）、链适配器中如何应用？

开放链访问层三层API定义与GraphQL并没有特别深的联系，但GraphQL更好的实现三层API的定义。比如common chain API，对于比特币、以太坊都是通用API，只是针对目标链不一样，得到不同数据集，这是GraphQL的帮助。在common chain API之下，不同链不同能力在分化，通过GraphQL，用户查询比特币、以太坊是两个不同查询，但语法结构、用户写query方式是相似的，一次query，就能应用在不同链上，开发者不需要太多学习成本，其访问链的能力轻松的从一条链迁移到另外一条链。并且我们还会提供Playground，帮助你autocomplate更好的构造query，减轻记忆成本，构造好query，就能查询到相应结果。
在我们构想里，通过API查询适配器，GraphQL通过API不断探索不同的适配器去访问不同的链的能力。

8. 目前区块链领域的技术解决方案，为什么采用GraphQL的目前只有我们一家？

相对而言，GraphQL还是较新的技术，尽管脸书使用了几年。但是，对于无论对前端还是后端，大多数还是熟悉REST API，很多技术提供商更倾向于通过restful提供相关服务，有很多成熟的客户端，命令行里JSONquery。相信之后会有很多人采用。第二个原因是，服务器端还有很多门槛
OCAP本身是对外的API层；Blocklet是框架，会有API、会有我们设计的资源（比特币、以太坊的节点），提供DApp的组件；去中心化订阅网关是API，最终这些能力，复杂的技术包装在简单的API提供给应用开发者，比如开发者监测一个以太坊节点的地址、交易变化，可以通过我们的订阅网关去订阅动态。

9. ArcBlock将如何善用GraphQL社区的资源？

我们会和GraphQL社区联合举办活动，双赢合作，也可以联合举办黑客松

10. 关于GraphQL，ArcBlock将与Facebook如何合作？

DITO

11. 开放链访问层的3个不同等级API，是否已全部实现？技术工程上有何难度？

还没有全部实现，各个层级实现了一部分。最基础的第一层，链有什么能力，最基础的元数据是什么，这些属于common chain data；第二层，实现了部分交易层，交易相关的API，相对统一，不会像L!完全统一；第三层，原生链API，比特币、以太坊有不同的体现，用户查询比特币UTXO、以太坊每个交易上的执行细节（合约执行、gas消耗情况、资金进出）。数据层面的API，还没完成。
技术工程难度：链上数据的获取和存储。索引比特币的时候，从原始区块文件读取发现，比特币区块数据的文件组织形式不是连续的，这一个区块和上一个区块是缺失的，需要重新排序，通过哈希值连接起来；另外计算UTXO时，今年1月7000多万，现在回落到4000/5000晚。当前得到的UTXO，当新区块进来的，怎么接上，存储计算比较复杂；以太坊：更复杂，拿到更具体的区块数据，两者数据量很大。以太坊数据，整理下来大约1T。

12. 目前这版OCAP开发了哪几个链适配器？链适配器开发的最大挑战是什么？

比特币、以太坊。链适配器，是构建一个框架，链适配器API一次撰写、多处应用，single source of truth。做API本身，还需要提供文档：schema，在文档、API、数据都要写，提供框架，一次撰写、多处生成。

13. OCAP将先后支持比特币、以太坊、Cybermiles、Hyperledger等公链，在技术上是怎么考虑的？

比特币、以太坊，是公认的老大、老二，第一版支持最热门的。以太坊标准、RPC兼容的公链，也优先支持，比如支持Cybermiles。。hyperledger的概念、组织形态、链上数据访问形式，很不同，是否支持待考虑。以后依靠社区来支持更多区块链。

14. 能否描述一个成熟的DApp如何通过OCAP访问一个或多个区块链，调用哪些底层区块链技术功能特性，为其所用？

目前OCAP只支持数据读取，去做一些数据层面的事情。我们现在能想到的DApp，比如说有个DApp来查询账户关系、追踪基金流动，矿池、交易所的账号，可视化，这类的应用会非常有趣。投资、钱包、交易所……
未来的主链，可视化智能合约

15. 开发者是否只能通过Playground体验OCAP？

Playground是开发者友好的界面，公开版API，如AWS一样，开发社区需要注册，ACCESS KEY和Secret，公开版OCAP是限速的。

16. Playground本身是用什么语言技术构建的？

是用Elixir语言实现，它是基于erlang的虚拟机（VM），支持高并发（actor model），非常适合分布式系统的高并发情景，后端是用这个语言来构建，前端是用React来构建。

17. DApp Demo是怎么构造的？开发者怎么尝试体验？

6月底先发布OCAP和Playground；之后也是用Elixir、React语言来构建。我们会在官网的APP gallery来发布。

18. Blocklet、Decentralised Pub/Sub Gateway目前开发进展如何？

去中心化订阅网关已经有一版，再优化；Blocklet正在构思中，抽象出更好的框架。我们自己和开发者在使用OCAP中发现更多的需求，再开发Blocklet。
本来要做一个演示DApp（学历证书），现在有更大的构想，就调整为OCAP

19. OCAP与Blocklet、Decentralised Pub/Sub Gateway如何配合？

N/A